apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: kafka
  namespace: kafka
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: kafka
  chart:
    repository: https://charts.bitnami.com/bitnami
    name: kafka
    version: 7.2.0
  values:
    numPartitions: 3
    persistence:
      enabled: false
    service:
      type: NodePort
      port: 9092
    externalAccess:
      enabled: false
      service:
        type: NodePort
        port: 19092
        domain: domain.com
    metrics:
      kafka:
        enabled: true
      jmx:
        enabled: true
      serviceMonitor:
        enabled: true
    zookeeper:
      persistence:
        enabled: false
